{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { refs } from \"../main\";\n\nlet galleryA;\n\nfunction galleryTemplate({\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n}) {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"info-box\">\n            <p>Likes:<span> ${likes}</span></p>\n            <p>Views:<span> ${views}</span></p>\n            <p>Comments:<span> ${comments}</span></p>\n            <p>Downloads:<span> ${downloads}</span> </p>\n        </div>\n    </li>`;\n}\n\nexport function renderGalleryItem(images) {\n    const markup = images.map(galleryTemplate).join('');\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n   \n    if (!galleryA) {\n        initializeSimpleLightbox();\n    } else {\n        refreshSimpleLightbox();\n    }\n}\n\nfunction initializeSimpleLightbox() {\n    galleryA = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n    });\n}\n\nfunction refreshSimpleLightbox() {\n    galleryA.refresh();\n}","import axios from 'axios';\n\nimport { searchQuery } from '../main';\nimport { pageOf } from '../main';\n\nexport const Per_Page = 15;\nexport async function getImages() {\n    \n    axios.defaults.baseURL = 'https://pixabay.com/api/';\n    const response = await axios.get('', {\n    params: {\n    key: '42262858-7b31826aafbc45fb5436f2ee9',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    q: searchQuery,\n    page: pageOf,\n    per_page: Per_Page,\n    }\n    });\n    return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderGalleryItem } from \"./js/render-functions\";\nimport { getImages, Per_Page } from \"./js/pixabay-api\";\n\nexport let searchQuery = '';\nexport let pageOf = 1;\n\nexport const refs = {\n    formEl: document.querySelector('.form'),\n    inputEl: document.querySelector('.query'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoad: document.querySelector('.load-more-btn'),\n};\n\nconst galleryItem = refs.gallery.querySelector('.gallery-item');\n\nrefs.formEl.addEventListener(\"submit\", handleSubmit);\nrefs.btnLoad.addEventListener(\"click\", handleLoadMoreClick);\n\nasync function handleSubmit(event) { \n    event.preventDefault();\n    pageOf = 1;\n    createLoader();\n    const query = event.target.elements.query.value;\n    searchQuery = query.trim();\n    \n    if (!searchQuery) {\n        showNotification('Please fill in the input field');\n        return;\n    }\n\n    try {\n        resetGallery();\n        const data = await getImages(pageOf, searchQuery);\n\n        if (data.hits.length > 0) {\n            renderGalleryItem(data.hits);\n            showLoadMoreBtn();\n            scrollToGallery();\n        } else {\n            resetGallery();\n            hideLoadMoreBtn();\n            showNotification('Sorry, there are no images matching your search query. Please try again!');\n        }\n        SearchResults(data.totalHits, pageOf);\n    } catch (error) {\n        console.error('Error data:', error);\n        if (error.message.includes('network')) {\n            showNotification('Please check your internet connection');\n        } else {\n            showNotification('An error occurred. Please try again later.');\n        }\n    } finally {\n        createLoader();\n        event.target.reset();\n    }\n}\n\nasync function handleLoadMoreClick() {\n    createLoader();\n    pageOf += 1;\n    const data = await getImages(pageOf, searchQuery);\n    renderGalleryItem(data.hits);\n    SearchResults(data.totalHits, pageOf);\n    createLoader();\n}\n\nfunction createLoader() {\n    refs.loader.classList.toggle('hidden');\n}\n\nfunction showNotification(message) {\n    iziToast.show({\n        message,\n        messageColor: '#FFFFFF',\n        backgroundColor: '#B51B1B',\n        position: 'topRight',\n    });\n}\n\nfunction showLoadMoreBtn() {\n    refs.btnLoad.style.display = \"block\";\n}\n\nfunction hideLoadMoreBtn() { \n    refs.btnLoad.style.display = \"none\";\n}\n\nfunction scrollToGallery() {\n    if (galleryItem) {\n        const galleryItemHeight = galleryItem.getClientRect().height;\n        window.scrollBy({\n            top: galleryItemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nfunction resetGallery() {\n    refs.gallery.innerHTML = '';\n    hideLoadMoreBtn();\n}\n\nfunction SearchResults(totalHits, pageOf) {\n    const maxPage = Math.ceil(totalHits / Per_Page);\n    if (maxPage === pageOf) {\n        hideLoadMoreBtn();\n        showNotification(\"We're sorry, but you've reached the end of search results.\");\n    }\n} "],"names":["galleryA","galleryTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGalleryItem","images","markup","refs","refreshSimpleLightbox","initializeSimpleLightbox","SimpleLightbox","Per_Page","getImages","axios","searchQuery","pageOf","galleryItem","handleSubmit","handleLoadMoreClick","event","createLoader","showNotification","resetGallery","data","showLoadMoreBtn","scrollToGallery","hideLoadMoreBtn","SearchResults","error","message","iziToast","galleryItemHeight","totalHits"],"mappings":"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"}